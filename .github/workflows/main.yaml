name: build

on: [push]

jobs:
  windows:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v1
    - name: cmake configure and build
      run: cmake -DUSE_SHARED_MBEDTLS_LIBRARY=Off -DUSE_STATIC_MBEDTLS_LIBRARY=On -DENABLE_PROGRAMS=Off -DENABLE_TESTING=Off -D CMAKE_BUILD_TYPE=Release -A x64 .
    - name: cmake build
      run: |
        cmake --build . --config Release
    - uses: actions/upload-artifact@v2
      with:
        name: mbedtls-lib
        path: library/Release/*.*
